import{v as f,a as t,u as x,b as _,r as j,Y as n,Z as g,_ as N,$ as v,j as s,L as b,E as w,a0 as y,K as C,O as I,a1 as P}from"./index-NFJOMV6q.js";import{U}from"./UserPostCard-CZXrjzSY.js";import{E as k}from"./ErrorCard-CSolYDyc.js";import"./x-Gahxmuih.js";const S=()=>{const{id:e}=f();console.log(e);const{user:r,posts:c,profileLoading:p,postsLoading:m,profileError:d}=t(a=>a.OtherProfileReducer);console.log(r);const i=t(a=>a.userReducer.user),h=t(a=>a.FollowReducer.isFollowingMap),l=x(),o=_();if(j.useEffect(()=>{if(i?.userId&&String(i.userId?._id||i.userId)===String(e)){o("/Profile",{replace:!0});return}l(n(e));let a=setTimeout(()=>{l(g(e))},500);return l(N(e)),()=>{l(v()),clearTimeout(a)}},[e,l,i,o]),p)return s.jsx(b,{});if(r)return s.jsxs("div",{className:"profile",children:[s.jsxs("div",{className:"profile__nav",children:[s.jsx("div",{className:"profile__back-btn",onClick:()=>o(-1),children:s.jsx(w,{size:30})}),s.jsx("h2",{className:"profile__username",children:r?.displayName})]}),d&&s.jsx(k,{message:d,clearAction:y,isvisible:!0}),s.jsxs("div",{className:"info_wrapper",children:[s.jsxs("div",{className:"profile__info",children:[s.jsx("div",{className:"profile__avatar",style:{backgroundImage:`url(${r?.avatarUrl})`}}),s.jsxs("div",{className:"user_info",children:[s.jsx("p",{className:"profile__name",children:r?.displayName}),s.jsx("p",{className:"profile__role",children:r?.userId?.username}),s.jsx("p",{className:"profile__joined",children:"Joined 2021"})]})]}),s.jsxs("div",{className:"profile__stats",children:[s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:r?.followersCount}),s.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${r?.userId}/followers`),style:{cursor:"pointer"},children:"Followers"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:r?.followingCount}),s.jsx("p",{className:"stat__label",onClick:()=>o(`/profile/${r?.userId}/following`),style:{cursor:"pointer"},children:"Following"})]})]}),s.jsx("p",{className:"profile__bio",children:r?.bio}),String(i?.userId?._id||i?.userId)!==String(r?.userId)&&s.jsxs("div",{style:{padding:"0 1rem 1rem",display:"flex",gap:"8px"},children:[h[e]?s.jsx("button",{className:"btn btn-secondary",onClick:()=>l(C(e)).then(()=>l(n(e))),children:"Unfollow"}):s.jsx("button",{className:"btn btn-primary",onClick:()=>l(I(e)).then(()=>l(n(e))),children:"Follow"}),s.jsx("button",{className:"btn btn-primary",onClick:()=>l(P(e)).then(()=>o(`/messages/${e}`)),children:"Message"})]}),s.jsx("div",{className:"profile__tabs",children:s.jsx("a",{href:"#",className:"active",children:"Posts"})}),m?s.jsx("div",{style:{flex:"1",padding:"4rem 1rem",textAlign:"center"},children:s.jsx("p",{children:"Posts Fetching..."})}):c?.length>0?s.jsx("div",{className:"profile__posts",children:c.map((a,u)=>s.jsx(U,{post:a},u))}):s.jsx("p",{style:{width:"100%",padding:"4rem 1rem",textAlign:"center"},children:"No posts yet."})]})]})};export{S as default};
