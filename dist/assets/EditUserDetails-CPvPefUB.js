import{t as j,b as v,u as N,a as g,r as o,A as y,j as e,L as U,I as E,J as P}from"./index-NFJOMV6q.js";import{u as D}from"./index.esm-CT-llGJ6.js";import{E as L}from"./ErrorCard-CSolYDyc.js";import"./x-Gahxmuih.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w=j("chevron-left",k),I=()=>{const p=v(),c=N(),{user:i,profileLoading:a,profileError:m}=g(s=>s.userReducer),[u,n]=o.useState(""),{register:t,handleSubmit:f,reset:d,watch:h}=D({defaultValues:{displayName:"",username:"",bio:""}});o.useEffect(()=>{i||c(y()),i?.avatarUrl&&n(i.avatarUrl)},[c,i]),o.useEffect(()=>{i&&(d({displayName:i?.displayName||"",username:i?.userId?.username||"",bio:i?.bio||""}),i?.avatarUrl&&n(i.avatarUrl))},[i,d]);const l=h("profilePic");o.useEffect(()=>{if(l&&l[0]){const s=l[0],r=URL.createObjectURL(s);return n(r),()=>URL.revokeObjectURL(r)}},[l]);const x=async s=>{const r=new FormData;s.displayName&&r.append("displayName",s.displayName),s.username&&r.append("username",s.username),s.bio&&r.append("bio",s.bio),s.profilePic&&s.profilePic[0]&&r.append("profilePic",s.profilePic[0]),await c(P(r)),d()},b=()=>{p("/profile")};return e.jsxs("div",{className:"edit-user-page",style:{position:"relative"},children:[a&&e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:e.jsx(U,{})}),e.jsxs("header",{className:"header",children:[e.jsx(w,{className:"back-btn",onClick:b}),e.jsx("div",{className:"profile-text",children:e.jsx("h2",{children:"Edit profile"})})]}),e.jsx(L,{message:m,loading:a,clearAction:E,isvisible:!0}),e.jsx("main",{className:"content",children:e.jsxs("form",{onSubmit:f(x),className:"form",children:[e.jsxs("div",{className:"profile-pic-container",children:[e.jsx("img",{src:u||i?.avatarUrl||"https://lh3.googleusercontent.com/aida-public/AB6AXuCvZ6iX3SS0n5bWvq4xivN92oDnmMmoPonKiGulM2PvFLtdFxF6eyVrTBeE3UQtkxdiNU3-4hgssfcdEtNLC_0vOMumHsu9WeV5VzCak-VKmQJuYP9hTcQa7IDcFf0gKtBjU7OguR4YD4vSdk3Nyzf5GQHbzPaXqQNP9bwbuepDDJ2OZ889Bsdw6iX-rL1drIoBrKoJc3Bxt-GxOwJrr-MK2gDB4rNECU9WkHpFdbvgcNJ8uuvzjMTtu7edZ9-US0OhApKxfEXDKDM",alt:"Profile",className:"profile-pic",style:{objectFit:"contain",backgroundColor:"white"}}),e.jsx("label",{htmlFor:"profilePic",className:"change-pic-text",children:"Change profile photo"}),e.jsx("input",{type:"file",id:"profilePic",accept:"image/*",hidden:!0,...t("profilePic")})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Display Name"}),e.jsx("input",{...t("displayName"),placeholder:"Enter display name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Username"}),e.jsx("input",{...t("username"),placeholder:"Enter username"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Bio"}),e.jsx("textarea",{...t("bio"),placeholder:"Write something about yourself..."})]}),e.jsx("div",{className:"form-actions",children:e.jsx("button",{type:"submit",className:"save-btn",disabled:a,"aria-busy":a,children:a?"Updating...":"Update"})})]})})]})};export{I as default};
