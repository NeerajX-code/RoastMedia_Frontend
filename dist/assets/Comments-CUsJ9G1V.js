import{t as h,v,r as c,a as r,u as C,b as N,d as k,j as e,a1 as y,a2 as f,a3 as b}from"./index-gLIxXFiy.js";import{S as w}from"./square-pen-DvGnzA0O.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],S=h("circle-check-big",I);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]],D=h("delete",_),E=()=>{const{id:a}=v(),[d,l]=c.useState(null),[n,i]=c.useState(""),{comments:u}=r(s=>s.CommentsReducer),{user:x}=r(s=>s.userReducer),o=C(),p=N(),[t,m]=c.useState(""),j=()=>{t.trim()&&t.trim()!==n.trim()&&(console.log(t,a),o(b({id:a,comment:t})),m(""))};return c.useEffect(()=>{o(k(a))},[o]),e.jsxs("div",{className:"comments-page",children:[e.jsxs("header",{className:"comments-header",children:[e.jsx("button",{onClick:()=>p(-1),className:"back-btn",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:e.jsx("path",{d:"M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"})})}),e.jsx("h2",{children:"Comments"})]}),e.jsx("div",{className:"comments-list",children:u.map(s=>e.jsxs("div",{className:"comment",children:[e.jsx("div",{className:"avatar",style:{backgroundImage:`url(${s.profile?.avatarUrl})`}}),e.jsxs("div",{className:"content",children:[e.jsxs("div",{className:"content_top",children:[e.jsxs("div",{className:"meta",children:[e.jsx("p",{className:"name",children:s.profile?.displayName||"Unknown User"}),e.jsx("p",{className:"time",children:new Date(s.createdAt).toLocaleString("en-IN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"})})]}),s.user===x.userId._id&&e.jsxs("div",{className:"actions",children:[d!==s._id?e.jsx("button",{onClick:()=>{l(s._id),i(s.comment)},children:e.jsx(w,{})}):e.jsx("button",{onClick:()=>{console.log(n),n.trim()&&o(y({postId:a,commentId:s._id,newComment:n})),l(null),i("")},children:e.jsx(S,{})}),e.jsx("button",{onClick:()=>o(f({postId:a,commentId:s._id})),children:e.jsx(D,{})})]})]}),d!==s._id?e.jsx("p",{className:"text",children:s.comment}):e.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value)})]})]},s._id))}),e.jsxs("div",{className:"comment-input",children:[e.jsx("div",{className:"avatar",style:{backgroundImage:"url('https://lh3.googleusercontent.com/aida-public/AB6AXuC9K8SNwVV0f4ggstewz9DwgsIXj0JuFeFTx67LPknsj1wuAkdGqqQ2fyKZA82CFK1Eg6OVyMHmOq7TrQubDv77OnHj8VFS7j_Yk5GYjGhlp-Us7dLxdNVIgVby14LpvDTOzjKLTAHAWe8-o-XDl1ZSh-wEa4-mZo2WUwJvEDD_iSUVgS17De-T6zTtqJfnGEKhg9eMH0k2o6cHdH8fcfhywPXFpxYt70zuICP8xpikc5CjxgMPJgFQHdqD7ajIRsmsWHGol0HDxMk')"}}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{value:t,onChange:s=>m(s.target.value),type:"text",placeholder:"Add a comment..."}),e.jsx("button",{className:"send-btn",onClick:j,disabled:!t.trim(),children:"Send"})]})]})]})};export{E as default};
