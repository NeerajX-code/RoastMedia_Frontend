import{u as p,a as m,j as s,N as v,K as f,O as g,R as w,r as d,Q as N,T as x,U as b,L as U}from"./index-gLIxXFiy.js";import{E as y}from"./ErrorCard-B8X3p8dj.js";const C=({user:c})=>{if(!c)return null;const{userData:e,avatarUrl:o,displayName:i}=c,a=p(),l=m(t=>t.userReducer.user)?.userId?._id===e?._id,n=m(t=>t.FollowReducer.isFollowingMap[e?._id]),u=l?"/Profile":`/other/profile/${e?._id}`;return s.jsxs(v,{to:u,className:"search-user-card",children:[s.jsx("img",{src:o,alt:i||"User Avatar",className:"user-avatar"}),s.jsxs("div",{className:"user-info",children:[s.jsx("h4",{className:"display-name",children:i}),s.jsxs("p",{className:"username",children:["@",e?.username]})]}),!l&&s.jsx("div",{className:"follow-action",onClick:t=>t.preventDefault(),children:n?s.jsx("button",{className:"btn btn-secondary",onClick:()=>a(f(e?._id)),children:"Unfollow"}):s.jsx("button",{className:"btn btn-primary",onClick:()=>a(g(e?._id)),children:"Follow"})})]})},S=()=>{const{results:c,query:e,loading:o,error:i}=m(r=>r.searchReducer),[a,h]=d.useState(e||""),l=p(),n=d.useCallback(()=>{a.trim()?l(N(a)):l(x())},[a,l]);d.useEffect(()=>{const r=setTimeout(n,400);return()=>clearTimeout(r)},[n]);const u=()=>{l(x()),h("")},t=d.useMemo(()=>c?.map((r,j)=>s.jsx(C,{user:r},r._id||j)),[c]);return s.jsxs("div",{className:"search-user-page",style:{position:"relative"},children:[s.jsxs("div",{className:"search-bar",children:[s.jsx("div",{className:"search-icon",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"})})}),s.jsx("input",{type:"text",placeholder:"Search",value:a,onChange:r=>h(r.target.value)}),a&&s.jsx("button",{className:"clear-btn",onClick:u,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",fill:"currentColor",viewBox:"0 0 256 256",children:s.jsx("path",{d:"M165.66,101.66,139.31,128l26.35,26.34a8,8,0,0,1-11.32,11.32L128,139.31l-26.34,26.35a8,8,0,0,1-11.32-11.32L116.69,128,90.34,101.66a8,8,0,0,1,11.32-11.32L128,116.69l26.34-26.35a8,8,0,0,1,11.32,11.32ZM232,128A104,104,0,1,1,128,24,104.11,104.11,0,0,1,232,128Zm-16,0a88,88,0,1,0-88,88A88.1,88.1,0,0,0,216,128Z"})})})]}),i&&s.jsx(y,{message:i,loading:o,clearAction:b,isvisible:!0}),s.jsxs("div",{className:"tabs",children:[s.jsx("a",{href:"#",className:"active",children:"Top"}),s.jsx("a",{href:"#",children:"Users"})]}),o&&s.jsx(U,{}),s.jsx("div",{className:"user-grid",children:t})]})},k=w.memo(S);export{k as default};
