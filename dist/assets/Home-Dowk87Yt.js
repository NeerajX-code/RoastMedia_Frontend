import{u as l,a as o,b as d,j as e,N as x,H as j,c as u,C as p,d as _,S as g,e as f,B as v,f as N,r as C,g as c,L as k}from"./index-NFJOMV6q.js";import{E as w}from"./ErrorCard-CSolYDyc.js";import"./x-Gahxmuih.js";const b=({post:s})=>{const a=l(),r=o(i=>i.userReducer.user),n=r?.userId?._id&&s?.userData?._id&&String(r.userId._id)===String(s.userData._id),t=d();return e.jsxs("div",{className:"post",children:[e.jsx(x,{to:n?"/Profile":`/other/profile/${s.userData._id}`,children:e.jsxs("div",{className:"post_top",children:[e.jsx("div",{className:"post_top_userImg",children:e.jsx("img",{src:s.profileData?.avatarUrl,alt:""})}),e.jsxs("div",{className:"post_top_userDetails",children:[e.jsxs("div",{className:"userDetails_left",children:[e.jsx("h2",{children:s.profileData?.displayName}),e.jsxs("p",{children:["@",s.userData?.username]})]}),e.jsx("div",{className:"userDetails_right",children:e.jsx("p",{children:new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"short",year:"numeric"}).format(new Date(s.createdAt))})})]})]})}),e.jsx("div",{className:"post__image",children:e.jsx("img",{src:s.image,alt:""})}),e.jsxs("div",{className:"post__content",children:[e.jsx("h2",{className:"post__username",children:s.username}),e.jsx("p",{className:"post__caption",children:s.caption.replace(/[*"]+/g,"")}),e.jsxs("div",{className:"post__actions",children:[e.jsxs("button",{onClick:()=>a(u(s._id)),children:[e.jsx(j,{stroke:s.isLiked?"none":"white",fill:s.isLiked?"red":"none"}),e.jsx("span",{children:s.likesCount})]}),e.jsxs("button",{onClick:()=>{a(_(s._id)),t(`/Comments/${s._id}`)},children:[e.jsx(p,{})," ",e.jsx("span",{children:s.commentCount})]}),e.jsxs("button",{onClick:async()=>{a(f(s._id));const i=`${window.location.origin}/Single-post/${s._id}`,h=`
                            <a href="${i}" target="_blank">
                            <strong>Check this Post!</strong><br/>
                            <img src={${s.image}} width="200"/>
                            <p>{${s.caption.replace(/[*"]+/g,"")}}</p>
                            </a>`;try{await navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([i],{type:"text/plain"}),"text/html":new Blob([h],{type:"text/html"})})]),alert("Rich content copied to clipboard!")}catch(m){console.error("Failed:",m)}},children:[e.jsx(g,{})," ",e.jsx("span",{children:s.shareCount})]}),e.jsx("button",{onClick:()=>a(N(s._id)),children:e.jsx(v,{stroke:s?.saved?"none":"white",fill:s?.saved?"white":"none"})})]})]})]})},$=()=>{const{posts:s,loading:a,error:r}=o(t=>t.HomePostReducer),n=l();return d(),C.useEffect(()=>{s.length==0&&n(c())},[s,n]),a?e.jsx(k,{}):e.jsx("div",{className:"post-feed",style:{position:"relative"},children:e.jsxs("div",{className:"post-feed_wrapper",children:[e.jsxs("div",{className:"post-feed_options",children:[e.jsx("h2",{children:"For You"}),e.jsx("h2",{children:"Following"})]}),e.jsx(w,{message:r,loading:a,action:c}),e.jsx("div",{className:"post-feed__list",children:s?.map((t,i)=>e.jsx(b,{post:t},i))})]})})};export{$ as default};
