import{t as N,a as g,u as v,b,r as o,A as k,D as d,j as s,L as y,E,F as w,G as C,g as L}from"./index-gLIxXFiy.js";import{U as P}from"./UserPostCard-DGu4Fpfw.js";import{E as U}from"./ErrorCard-B8X3p8dj.js";import{S as I}from"./square-pen-DvGnzA0O.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],F=N("ellipsis-vertical",S),D=()=>{const{user:e,posts:c,profileLoading:t,profileError:n,postsLoading:p,successMessage:r}=g(i=>i.userReducer),l=v(),a=b(),[m,f]=o.useState(!1),_=()=>{f(i=>!i)};if(o.useEffect(()=>{!e&&!r&&l(k())},[l,e,r]),o.useEffect(()=>{e&&!r&&setTimeout(()=>{l(d(e?.userId?._id))},500)},[e,r,l]),t)return s.jsx(y,{});const x=()=>{a("/Edit-user-profile")},u=()=>{console.log("clicked"),l(w()).then(()=>{l(C()),l(L()),a("/login")})},h=()=>{a(-1)};return s.jsxs("div",{className:"profile",children:[s.jsxs("div",{className:"profile__nav",children:[s.jsx("div",{className:"profile__back-btn",children:s.jsx(E,{size:30,onClick:h})}),s.jsx("h2",{className:"profile__username",children:e?.displayName}),s.jsx(I,{className:"profile__edit-btn",onClick:x}),s.jsx("span",{className:"dots",onClick:_,children:s.jsx(F,{})}),m&&s.jsx("div",{className:"logout_menu",children:s.jsx("button",{onClick:u,children:"Logout"})})]}),n&&s.jsx(U,{message:n,action:()=>l(d(e._id)),loading:t}),s.jsxs("div",{className:"info_wrapper",children:[s.jsxs("div",{className:"profile__info",children:[s.jsx("div",{className:"profile__avatar",style:{backgroundImage:`url(${e?.avatarUrl})`}}),s.jsxs("div",{className:"user_info",children:[s.jsx("p",{className:"profile__name",children:e?.displayName}),s.jsx("p",{className:"profile__role",children:e?.userId?.username}),s.jsx("p",{className:"profile__joined",children:"Joined 2021"})]})]}),s.jsxs("div",{className:"profile__stats",children:[s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followersCount}),s.jsx("p",{className:"stat__label",onClick:()=>a(`/profile/${e?.userId?._id}/followers`),style:{cursor:"pointer"},children:"Followers"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followingCount}),s.jsx("p",{className:"stat__label",onClick:()=>a(`/profile/${e?.userId?._id}/following`),style:{cursor:"pointer"},children:"Following"})]})]}),s.jsx("p",{className:"profile__bio",children:e?.bio}),s.jsx("div",{className:"profile__tabs",children:s.jsx("a",{href:"#",className:"active",children:"Posts"})}),p?s.jsx("div",{className:"profile__loading-text",children:s.jsx("p",{children:"Posts Fetching..."})}):c?.length>0?s.jsx("div",{className:"profile__posts",children:c.map((i,j)=>s.jsx(P,{post:i},j))}):s.jsx("p",{className:"profile__no-posts",children:"No posts yet."})]})]})};export{D as default};
