import{a as N,u as g,b as v,r,A as b,D as d,j as s,L as E,E as k,F as w,G as C,g as P}from"./index-NFJOMV6q.js";import{U as L}from"./UserPostCard-CZXrjzSY.js";import{E as y}from"./ErrorCard-CSolYDyc.js";import{S as U}from"./square-pen-Bzgwx26J.js";import{E as I}from"./ellipsis-vertical-Cmprk9TV.js";import"./x-Gahxmuih.js";const D=()=>{const{user:e,posts:t,profileLoading:c,profileError:n,postsLoading:p,successMessage:o}=N(i=>i.userReducer),a=g(),l=v(),[m,f]=r.useState(!1),_=()=>{f(i=>!i)};if(r.useEffect(()=>{!e&&!o&&a(b())},[a,e,o]),r.useEffect(()=>{e&&!o&&setTimeout(()=>{a(d(e?.userId?._id))},500)},[e,o,a]),c)return s.jsx(E,{});const u=()=>{l("/Edit-user-profile")},h=()=>{console.log("clicked"),a(w()).then(()=>{a(C()),a(P()),l("/login")})},x=()=>{l(-1)};return s.jsxs("div",{className:"profile",children:[s.jsxs("div",{className:"profile__nav",children:[s.jsx("div",{className:"profile__back-btn",children:s.jsx(k,{size:30,onClick:x})}),s.jsx("h2",{className:"profile__username",children:e?.displayName}),s.jsx(U,{className:"profile__edit-btn",onClick:u}),s.jsx("span",{className:"dots",onClick:_,children:s.jsx(I,{})}),m&&s.jsx("div",{className:"logout_menu",children:s.jsx("button",{onClick:h,children:"Logout"})})]}),n&&s.jsx(y,{message:n,action:()=>a(d(e._id)),loading:c}),s.jsxs("div",{className:"info_wrapper",children:[s.jsxs("div",{className:"profile__info",children:[s.jsx("div",{className:"profile__avatar",style:{backgroundImage:`url(${e?.avatarUrl})`}}),s.jsxs("div",{className:"user_info",children:[s.jsx("p",{className:"profile__name",children:e?.displayName}),s.jsx("p",{className:"profile__role",children:e?.userId?.username}),s.jsx("p",{className:"profile__joined",children:"Joined 2021"})]})]}),s.jsxs("div",{className:"profile__stats",children:[s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followersCount}),s.jsx("p",{className:"stat__label",onClick:()=>l(`/profile/${e?.userId?._id}/followers`),style:{cursor:"pointer"},children:"Followers"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("p",{className:"stat__number",children:e?.followingCount}),s.jsx("p",{className:"stat__label",onClick:()=>l(`/profile/${e?.userId?._id}/following`),style:{cursor:"pointer"},children:"Following"})]})]}),s.jsx("p",{className:"profile__bio",children:e?.bio}),s.jsx("div",{className:"profile__tabs",children:s.jsx("a",{href:"#",className:"active",children:"Posts"})}),p?s.jsx("div",{className:"profile__loading-text",children:s.jsx("p",{children:"Posts Fetching..."})}):t?.length>0?s.jsx("div",{className:"profile__posts",children:t.map((i,j)=>s.jsx(L,{post:i},j))}):s.jsx("p",{className:"profile__no-posts",children:"No posts yet."})]})]})};export{D as default};
